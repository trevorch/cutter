import{E as te,i as he}from"./element-plus-CRGBzuq5.js";import{f as Y,g as Q,B as ke,l as we,w as be,Q as Te}from"./@element-plus-By79ymwD.js";import{r as $,j as re,c as B,o as N,a as z,M as A,u,d as ie,k as ve,ag as T,aq as Ce,I as _e,G as ce,H as l,P as e,L as M,S as Se,w as ze,J as pe,O as ue,a6 as ye,D as xe,n as Me,X as Pe,Q as Ee,at as De}from"./@vue-C01xNfPK.js";import{d as de,c as Ie}from"./pinia-CKuVeK4o.js";import{P as je}from"./plyr-CZIZ1zVJ.js";import{H as ae}from"./hls.js-DWnTp5j0.js";import{f as fe}from"./flv.js-HEV2ctDJ.js";import"./lodash-es-S0Y0Up6J.js";import"./@vueuse-ZGnAJoZm.js";import"./@popperjs-D_chPuIy.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-NaOncrXL.js";import"./async-validator-9PlIezaS.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@floating-ui-DwceP2Gb.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))v(a);new MutationObserver(a=>{for(const f of a)if(f.type==="childList")for(const I of f.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&v(I)}).observe(document,{childList:!0,subtree:!0});function p(a){const f={};return a.integrity&&(f.integrity=a.integrity),a.referrerPolicy&&(f.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?f.credentials="include":a.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function v(a){if(a.ep)return;a.ep=!0;const f=p(a);fetch(a.href,f)}})();function Le(m,o="未知错误"){if(m instanceof Error)return m.message;if(typeof m=="string")return m;if(typeof m=="object"&&m!==null&&"message"in m&&typeof m.message=="string")return m.message;try{return JSON.stringify(m)}catch{return o}}const ne={showClose:!0,dangerouslyUseHTMLString:!0,duration:3e3},se=`style="
      width: 500px; 
      word-wrap: break-word;
      word-break: break-all;
      white-space: normal;
      overflow-wrap: anywhere;
    "`;function q(m,o){const p=Le(m),v=o?`${o}: ${p}`:p;te.error({...ne,message:`
    <div ${se}>
      ${v}
    </div>
    `})}function j(m){te.error({...ne,message:`
    <div ${se}>
      ${m}
    </div>
    `})}function Oe(m){te.info({...ne,message:`
    <div ${se}>
      ${m}
    </div>
    `})}function G(m){te.success({...ne,message:`
    <div ${se}>
      ${m}
    </div>
    `})}const X=m=>{try{const[o,p]=m.split("."),[v,a,f]=o.split(":").map(Number),I=p?parseInt(p.padEnd(3,"0")):0;return v*3600+a*60+f+I/1e3}catch{return 0}},L=m=>{const o=Math.round(m%1*1e3),p=Math.floor(m),v=Math.floor(p/3600),a=Math.floor(p%3600/60),f=p%60;return`${String(v).padStart(2,"0")}:${String(a).padStart(2,"0")}:${String(f).padStart(2,"0")}.${String(o).padStart(3,"0")}`},W=de("player",()=>{const m=$(""),o=$(null),p=$(null),v=$(null),a=$(null),f=$(null),I=r=>{o.value=new je(r,{hideControls:!1,controls:["play-large","current-time","progress","duration","mute","volume","fullscreen","settings"],blankVideo:"https://cdn.plyr.io/static/blank.mp4"})},x=r=>{a.value=r,m.value=r.date;const d=r.urls[0],h={type:"video",sources:[{src:d,type:K(d)}]};V(h).then(()=>{var C;return(C=o.value)==null?void 0:C.play()})},K=r=>r.includes(".m3u8")?"application/x-mpegURL":r.includes(".flv")?"video/x-flv":"video/mp4",V=async r=>{var h,C,P;(h=p.value)==null||h.destroy(),p.value=null,(C=v.value)==null||C.destroy(),v.value=null;const d=r.sources[0].src.includes(".m3u8")?"hls":r.sources[0].src.includes(".flv")?"flv":"html5";try{d!==f.value&&await((P=o.value)==null?void 0:P.stop()),o.value.source=r,d==="hls"&&ae.isSupported()?await H(r.sources[0].src):d==="flv"&&fe.isSupported()&&await R(r.sources[0].src),f.value=d}catch(D){console.error("源切换失败:",D)}},H=async r=>new Promise(d=>{p.value=new ae,p.value.loadSource(r),p.value.attachMedia(o.value.media),p.value.on(ae.Events.MANIFEST_PARSED,d)}),R=async r=>{v.value=fe.createPlayer({type:"flv",url:r}),v.value.attachMediaElement(o.value.media),v.value.load(),await v.value.play()},O=$(!1);return{player:o,initPlayer:I,switchSource:V,playStream:x,title:m,data:a,autoPlay:O,jumpTo:r=>{const d=X(r);if(o.value&&d>0)try{o.value.currentTime=d,O.value?o.value.play():o.value.pause()}catch(h){q(h,"跳转播放失败，请检查播放器状态")}}}}),Ve={class:"video-wrapper"},He={class:"title"},Ke={class:"plyr-container"},Ne={__name:"Player",setup(m){const o=W(),p=$(null);return re(()=>{o.initPlayer(p.value)}),(v,a)=>(N(),B("div",Ve,[z("h3",He,A(u(o).title),1),z("div",Ke,[z("video",{class:"player",ref_key:"videoRef",ref:p,playsinline:""},null,512)])]))}},me=de("editor",()=>{const m=$(!1),o=$(!1),p=$(""),v=$(null),a=5e3,f=$(a),I=r=>{o.value=!0,v.value=r,p.value=r.date,_()},x=$([]),K=r=>{try{const[d,h]=r.split("."),[C,P,D]=d.split(":").map(Number);return C*3600+P*60+D}catch(d){console.error(d)}},V=$(new Map),H=()=>{V.value.clear(),x.value.forEach((r,d)=>{try{const h=K(r.time);V.value.has(h)||V.value.set(h,d)}catch(h){console.error(`错误处理时间戳 ${r.time}（索引 ${d}）: ${h}`)}})},R=r=>{if(!x.value)return;const d=f.value+r;f.value=Math.max(d,0);const h=r/1e3;x.value=x.value.map(C=>{const D=X(C.time)+h;return{...C,time:L(Math.max(D,0))}}),H()},O=()=>{if(!x.value)return;const d=(f.value-a)/1e3;x.value=x.value.map(h=>{const P=X(h.time)-d;return{...h,time:L(Math.max(P,0))}}),f.value=a,H()},_=async()=>{var r;m.value=!0;try{const d=await fetch(`srts/${(r=v.value)==null?void 0:r.id}`);if(!d.ok)throw new Error(`HTTP error! status: ${d.status}`);x.value=await d.json();const h=f.value/1e3;x.value=x.value.map(C=>{const D=X(C.time)+h;return{...C,time:L(Math.max(D,0))}}),H()}catch(d){console.error("数据获取失败:",d),q(d,"字幕数据加载失败，请稍后重试"),x.value=[]}finally{m.value=!1}};return{open:o,title:p,edit:I,data:v,timelineData:x,loading:m,shiftCount:f,shiftSubtitles:R,timeToSeconds:X,secondsToTime:L,resetSubtitles:O,timeMap:V,timeToKey:K}}),ge=(m,o)=>{const p=m.__vccOpts||m;for(const[v,a]of o)p[v]=a;return p},Re=["onClick"],Ue=["onClick"],Ae={style:{display:"flex",gap:"0","justify-content":"flex-end"}},Fe=ie({__name:"Playlist",setup(m){const o=W(),p=me(),v=$(""),a=$(!0),f=$([]),I=async()=>{try{const _=await fetch("video.json");if(!_.ok)throw new Error(`HTTP error! status: ${_.status}`);f.value=await _.json()}catch(_){q(_,"数据加载失败")}finally{a.value=!1}},x=ve(()=>{const _=v.value.toLowerCase();return f.value.filter(r=>r.id.toLowerCase().includes(_)||r.date.toLowerCase().includes(_))}),K=async _=>{var r;((r=_.urls)==null?void 0:r.length)>0?await H(_.urls[0],"链接已复制到剪贴板","链接复制失败"):j("该记录没有可用的链接")},V=async _=>{_.id?await H(_.id,"ID已复制到剪贴板","ID复制失败"):j("该记录没有可用的ID")},H=async(_,r,d)=>{try{await navigator.clipboard.writeText(_),G(r)}catch(h){q(h,d)}},R=_=>{var r;(r=_.urls)!=null&&r.length&&(_.urls[0],o.playStream(_),p.edit(_))},O=_=>{var r;(r=_.urls)!=null&&r.length&&(_.urls[0],o.playStream(_))};return re(()=>{I()}),(_,r)=>{const d=T("el-table-column"),h=T("el-input"),C=T("el-button"),P=T("el-table"),D=Ce("loading");return _e((N(),ce(P,{data:x.value,"default-sort":{prop:"date",order:"descending"},height:"100%",style:{width:"100%"}},{default:l(()=>[e(d,{fixed:"",label:"日期",prop:"date",sortable:"",width:"140"},{default:l(i=>[z("span",{class:"clickable-text",onClick:t=>K(i.row)},A(i.row.date),9,Re)]),_:1}),e(d,{fixed:"",label:"标识",prop:"id",width:"180"},{default:l(i=>[z("span",{class:"clickable-text",onClick:t=>V(i.row)},A(i.row.id),9,Ue)]),_:1}),e(d,{fixed:"right",align:"right",width:"115"},{header:l(()=>[e(h,{modelValue:v.value,"onUpdate:modelValue":r[0]||(r[0]=i=>v.value=i),size:"small",placeholder:"输入关键词搜索"},null,8,["modelValue"])]),default:l(i=>{var t,s;return[z("div",Ae,[e(C,{plain:"",size:"small",onClick:n=>R(i.row),type:i.row.hasSrt?"success":"warning",disabled:!i.row.hasSrt},{default:l(()=>r[1]||(r[1]=[M(" 编辑 ")])),_:2},1032,["onClick","type","disabled"]),e(C,{plain:"",size:"small",onClick:n=>O(i.row),type:(t=i.row.urls)!=null&&t.length?"success":"warning",disabled:!((s=i.row.urls)!=null&&s.length)},{default:l(()=>r[2]||(r[2]=[M(" 播放 ")])),_:2},1032,["onClick","type","disabled"])])]}),_:1})]),_:1},8,["data"])),[[D,a.value]])}}}),$e=de("picker",()=>{const m=$(!1),o=$(!1),p=$("");return $(null),$(0),{open:o,title:p,loading:m}}),Be={style:{display:"flex",gap:"0","justify-content":"flex-start"}},qe={key:0,class:"loading-state"},Je={class:"time-label"},Ye=["onClick"],Qe={key:1,class:"empty-state"},Ge={class:"footer-container"},Xe={class:"time-shift-controls"},We={class:"time-shift-controls"},Z=50,ee=5e3,Ze=ie({__name:"Editor",setup(m){const o=me(),p=W(),v=$e(),a=$(1e3),f=i=>{const t=a.value+i;a.value=Math.max(Z,Math.min(ee,t))},I=$(["你好","晚上好","拜拜","再见"]),x=i=>I.value.some(t=>i.includes(t)),K=ve(()=>o.timelineData.map((i,t)=>({text:i.text,index:t})).filter(({text:i})=>x(i)).map(({index:i})=>i).sort((i,t)=>i-t)),V=()=>{const i=K.value;if(i.length===0){j("未找到包含关键字的字幕行");return}let t=0,s=i.length-1,n=-1;for(;t<=s;){const c=Math.floor((t+s)/2);i[c]<r.value?(n=i[c],t=c+1):s=c-1}n===-1&&(n=i[i.length-1]),h(n)},H=()=>{const i=K.value;if(i.length===0){j("未找到包含关键字的字幕行");return}let t=0,s=i.length-1,n=-1;for(;t<=s;){const c=Math.floor((t+s)/2);i[c]>r.value?(n=i[c],s=c-1):t=c+1}n===-1&&(n=i[0]),h(n)},R=$(),O=$([]),_=i=>{i instanceof HTMLElement&&O.value.push(i)},r=$(0),d=async()=>{if(!p.player)return;const i=p.player.currentTime,t=L(i),s=o.timeToKey(t),n=o.timeMap.get(s);typeof n=="number"&&n!==r.value&&(r.value=n,await Me(),setTimeout(()=>h(n),50))},h=i=>{const t=R.value,s=O.value[i];if(s instanceof HTMLElement&&t){const c=s.offsetTop-t.clientHeight/2;t.scrollTo({top:c,behavior:"smooth"})}},C=$(595),P=$();let D=null;return re(()=>{P.value=document.querySelector(".grid-section.bottom"),P.value&&(D=new ResizeObserver(i=>{for(const t of i){const{height:s}=t.contentRect;C.value=s}}),D.observe(P.value)),p.player.on("timeupdate",d)}),Se(()=>{D&&P.value&&D.unobserve(P.value),p.player.off("timeupdate",d),O.value=[]}),ze(()=>o.timelineData,()=>{O.value=[]}),(i,t)=>{const s=T("Expand"),n=T("el-icon"),c=T("el-button"),k=T("Top"),E=T("Bottom"),b=T("el-text"),U=T("Minus"),F=T("el-drawer");return N(),ce(F,{modelValue:u(o).open,"onUpdate:modelValue":t[12]||(t[12]=g=>u(o).open=g),direction:"btt",modal:!1,size:C.value,onOpened:t[13]||(t[13]=g=>u(o).shiftSubtitles(0))},{header:l(()=>[z("div",Be,[e(c,{size:"small",type:u(v).open?"success":"",circle:""},{default:l(()=>[e(n,{onClick:t[0]||(t[0]=g=>u(v).open=!u(v).open)},{default:l(()=>[e(s)]),_:1})]),_:1},8,["type"]),e(c,{onClick:t[1]||(t[1]=g=>u(p).autoPlay=!u(p).autoPlay),type:u(p).autoPlay?"success":"",size:"small",circle:""},{default:l(()=>t[14]||(t[14]=[M("A")])),_:1},8,["type"]),e(c,{size:"small",circle:""},{default:l(()=>[e(n,{onClick:V},{default:l(()=>[e(k)]),_:1})]),_:1}),e(c,{size:"small",circle:""},{default:l(()=>[e(n,{onClick:H},{default:l(()=>[e(E)]),_:1})]),_:1}),e(b,{class:"mx-1",type:"warning"},{default:l(()=>{var g;return[M(A((g=u(o).data)==null?void 0:g.id),1)]}),_:1})])]),default:l(()=>[z("div",{class:"timeline-container",ref_key:"containerRef",ref:R},[u(o).loading?(N(),B("div",qe,[e(n,{class:"is-loading",color:"#409EFF",size:20},{default:l(()=>[e(u(we))]),_:1}),t[15]||(t[15]=z("span",null,"正在加载字幕数据...",-1))])):pe("",!0),(N(!0),B(ue,null,ye(u(o).timelineData,(g,w)=>(N(),B("div",{key:w,class:"timeline-item",ref_for:!0,ref:_},[z("span",Je,A(g.time),1),z("span",{class:xe(["content-text",{highlight:w==r.value,keyword:x(g.text)}]),onClick:y=>u(p).jumpTo(g.time)},A(g.text),11,Ye)]))),128)),!u(o).loading&&u(o).timelineData.length===0?(N(),B("div",Qe,[e(n,null,{default:l(()=>[e(u(be))]),_:1}),t[16]||(t[16]=z("span",null,"暂无字幕数据",-1))])):pe("",!0)],512)]),footer:l(()=>[z("div",Ge,[z("div",Xe,[e(c,{onClick:t[2]||(t[2]=g=>f(-1e3)),disabled:a.value<=Z,size:"small"},{default:l(()=>[e(n,null,{default:l(()=>[e(u(Y))]),_:1}),e(n,null,{default:l(()=>[e(u(Y))]),_:1}),e(n,null,{default:l(()=>[e(u(Y))]),_:1})]),_:1},8,["disabled"]),e(c,{onClick:t[3]||(t[3]=g=>f(-500)),disabled:a.value<=Z,size:"small"},{default:l(()=>[e(n,null,{default:l(()=>[e(u(Y))]),_:1}),e(n,null,{default:l(()=>[e(u(Y))]),_:1})]),_:1},8,["disabled"]),e(c,{onClick:t[4]||(t[4]=g=>f(-50)),disabled:a.value<=Z,size:"small"},{default:l(()=>[e(n,null,{default:l(()=>[e(u(Y))]),_:1})]),_:1},8,["disabled"]),z("span",{class:"count",onClick:t[5]||(t[5]=g=>a.value=50)},A(a.value),1),e(c,{onClick:t[6]||(t[6]=g=>f(50)),disabled:a.value>=ee,size:"small"},{default:l(()=>[e(n,null,{default:l(()=>[e(u(Q))]),_:1})]),_:1},8,["disabled"]),e(c,{onClick:t[7]||(t[7]=g=>f(500)),disabled:a.value>=ee,size:"small"},{default:l(()=>[e(n,null,{default:l(()=>[e(u(Q))]),_:1}),e(n,null,{default:l(()=>[e(u(Q))]),_:1})]),_:1},8,["disabled"]),e(c,{onClick:t[8]||(t[8]=g=>f(1e3)),disabled:a.value>=ee,size:"small"},{default:l(()=>[e(n,null,{default:l(()=>[e(u(Q))]),_:1}),e(n,null,{default:l(()=>[e(u(Q))]),_:1}),e(n,null,{default:l(()=>[e(u(Q))]),_:1})]),_:1},8,["disabled"])]),z("div",We,[e(c,{onClick:t[9]||(t[9]=g=>u(o).shiftSubtitles(-a.value)),disabled:u(o).shiftCount===0},{default:l(()=>[e(n,null,{default:l(()=>[e(U)]),_:1})]),_:1},8,["disabled"]),z("span",{class:"count",onClick:t[10]||(t[10]=(...g)=>u(o).resetSubtitles&&u(o).resetSubtitles(...g))},A(u(o).shiftCount),1),e(c,{onClick:t[11]||(t[11]=g=>u(o).shiftSubtitles(a.value))},{default:l(()=>[e(n,null,{default:l(()=>[e(u(ke))]),_:1})]),_:1})])])]),_:1},8,["modelValue","size"])}}}),et={class:"segment-container"},tt={class:"time-controls"},nt={class:"time-controls"},st={class:"time-controls"},lt={class:"card-footer"},ot=ie({__name:"Picker",setup(m){const o=W(),p=$e(),v=me(),a=Pe([f()]);function f(){return{id:crypto.randomUUID(),startTime:0,endTime:0,duration:0,isK:!1}}const I=t=>{a.splice(t+1,0,f())},x=t=>{a.length>1&&a.splice(t,1)},K=t=>{if(t>0){const s=a.splice(t,1)[0];a.splice(t-1,0,s)}},V=t=>{if(t<a.length-1){const s=a.splice(t,1)[0];a.splice(t+1,0,s)}};function H(t){if(!o.player)return;const s=o.player.currentTime,n=a[t];n.startTime=s}function R(t){if(!o.player)return;const s=o.player.currentTime,n=a[t];n.endTime=s}function O(t,s){var J;const n=a[t],c=n.isK?"-k":"";let k=(J=o.data)==null?void 0:J.urls[0];if(!k)throw j("请先播放视频"),new Error("请先播放视频");const E=k.match(/\/([^\/]+)\.mp4$/),b=E?E[1]:(()=>{const oe=new Date;return`${oe.getFullYear()}${(oe.getMonth()+1).toString().padStart(2,"0")}${oe.getDate().toString().padStart(2,"0")}`})();if(!n.startTime||!n.endTime)throw j("请先设置开始和结束时间"),new Error("请先设置开始和结束时间");const U=L(n.startTime),F=L(n.endTime),g=U.replace(/:/g,"."),w=F.replace(/:/g,".");let y="yt-dlp --no-check-certificate";y=`${y} --download-sections "*${U}-${F}"`,y=`${y} --force-keyframes-at-cuts`;const S="~/storage/downloads/Reqable/";return s=="video"&&(y=`${y} --merge-output-format mp4 -o "${S}${b}_${g}-${w}.mp4"`),s=="audio"&&(y=`${y} ${c} -x --audio-format mp3 --postprocessor-args "ffmpeg:-c:a libmp3lame -b:a 32k -minrate 32k -maxrate 32k -bufsize 64k -ac 1 -ar 22050" -o "${S}${b}_${g}-${w}.mp3"`),y=`${y} '${k}' `,y}function _(t,s){var S;const n=a[t],c=n.isK?"-k":"";let k=(S=o.data)==null?void 0:S.urls[0];if(!k)throw j("请先播放视频"),new Error("请先播放视频");const E=k.match(/\/([^\/]+)\.mp4$/),b=E?E[1]:(()=>{const J=new Date;return`${J.getFullYear()}${(J.getMonth()+1).toString().padStart(2,"0")}${J.getDate().toString().padStart(2,"0")}`})();if(!n.startTime||!n.endTime)throw j("请先设置开始和结束时间"),new Error("请先设置开始和结束时间");const U=L(n.startTime),F=L(n.endTime),g=U.replace(/:/g,"."),w=F.replace(/:/g,".");let y=`--download-sections "*${U}-${F}"`;return s=="video"&&(y=`${y} --merge-output-format mp4 -o "${b}_${g}-${w}.mp4"`),s=="audio"&&(y=`${y} ${c} -x --audio-format mp3 --postprocessor-args "ffmpeg:-c:a libmp3lame -b:a 32k -minrate 32k -maxrate 32k -bufsize 64k -ac 1 -ar 22050" -o "${b}_${g}-${w}.mp3"`),y}async function r(){var s;const t=(s=o.data)==null?void 0:s.urls[0];if(!t){j("请先播放视频");return}try{await navigator.clipboard.writeText(t),G(`链接已复制：${t}`)}catch(n){console.error(n),j("复制失败，请手动复制")}}async function d(t,s,n){let c="";switch(s){case"dlp":c=O(t,n);break;case"seal":c=_(t,n);break}try{await navigator.clipboard.writeText(c),G(`命令已复制：${c}`)}catch(k){console.error(k),j("复制失败，请手动复制")}}const h=async t=>{const s=[];a.forEach((n,c)=>{console.log(`Index: ${c}`,n),s.push(O(c,t))});try{await navigator.clipboard.writeText(s.join(`
`)),G(`命令已复制：${s.join("<br/>")}`)}catch(n){console.error(n),j("复制失败，请手动复制")}},C=$(!1);async function P(){var E;let t=(E=o.data)==null?void 0:E.urls[0];if(!t){j("请先播放视频");return}const s=t.match(/\/([^\/]+)\.mp4$/),n=s?s[1]:(()=>{const b=new Date;return`${b.getFullYear()}${(b.getMonth()+1).toString().padStart(2,"0")}${b.getDate().toString().padStart(2,"0")}`})(),c=a.filter(b=>b.startTime<b.endTime).map((b,U)=>`${L(b.startTime)}-${L(b.endTime)}`);if(!c.length){j("请先至少设置一个开始和结束时间");return}const k=`dlp ${C.value?"keep":"delete"} '${t}' ${n} ${c.join(" ")}`;try{D(k),await navigator.clipboard.writeText(k),G(`命令已复制：${k}`)}catch(b){console.error(b),q(b,"复制失败，请手动复制")}}async function D(t){try{const s=await fetch("http://localhost:8080/run",{method:"POST",headers:{"Content-Type":"text/plain"},body:t});if(!s.ok)throw new Error(`HTTP 错误: ${s.status}`);const c=(await s.json()).task_id;i(c)}catch(s){q(s,"请求失败: ")}}function i(t){const s=setInterval(async()=>{var n;try{const c=await fetch(`http://localhost:8080/progress/${t}`);if(!c.ok)throw new Error(`进度查询失败: ${c.status}`);const k=await c.json(),E=(n=k.recent_log)!=null&&n.length?`

最近日志:
`+k.recent_log.join(`
`):"";Oe(E),k.status==="completed"&&(clearInterval(s),G(`处理完成✅ (状态: ${k.status})${E}`)),k.status==="failed"&&(clearInterval(s),j(`处理完成✅ (状态: ${k.status})${E}`))}catch(c){clearInterval(s),q(c,"监控失败: ")}},1e3)}return(t,s)=>{const n=T("el-button"),c=T("el-input"),k=T("el-icon"),E=T("CaretLeft"),b=T("CaretRight"),U=T("Minus"),F=T("Plus"),g=T("el-card");return _e((N(),ce(g,{class:"segment-control-card"},{footer:l(()=>[z("div",lt,[e(n,{size:"small",onClick:r},{default:l(()=>s[11]||(s[11]=[M(" 复制链接 ")])),_:1}),e(n,{size:"small",onClick:P},{default:l(()=>s[12]||(s[12]=[M("下载片段")])),_:1}),e(n,{size:"small",onClick:s[0]||(s[0]=w=>h("video"))},{default:l(()=>s[13]||(s[13]=[M("复制命令")])),_:1})])]),default:l(()=>[z("div",et,[(N(!0),B(ue,null,ye(a,(w,y)=>(N(),B("div",{key:w.id,class:"segment-item"},[z("div",tt,[e(n,{type:"primary",size:"small",onClick:S=>d(y,"seal","audio")},{default:l(()=>s[1]||(s[1]=[M("SA")])),_:2},1032,["onClick"]),e(n,{type:"primary",size:"small",onClick:S=>d(y,"seal","video")},{default:l(()=>s[2]||(s[2]=[M("SV")])),_:2},1032,["onClick"]),e(n,{type:"primary",size:"small",onClick:S=>d(y,"dlp","audio")},{default:l(()=>s[3]||(s[3]=[M("DA")])),_:2},1032,["onClick"]),e(n,{type:"primary",size:"small",onClick:S=>d(y,"dlp","video")},{default:l(()=>s[4]||(s[4]=[M("DV")])),_:2},1032,["onClick"]),e(c,{"model-value":u(v).secondsToTime(w.endTime-w.startTime),size:"small",readonly:""},null,8,["model-value"]),e(n,{size:"small",type:w.isK?"success":"info",onClick:S=>w.isK=!w.isK},{default:l(()=>[M(A(w.isK?"-k开":"-k关"),1)]),_:2},1032,["type","onClick"]),e(n,{size:"small",circle:"",type:"success"},{default:l(()=>[e(k,null,{default:l(()=>[M(A(y+1),1)]),_:2},1024)]),_:2},1024)]),z("div",nt,[e(n,{type:"success",size:"small",onClick:S=>H(y)},{default:l(()=>s[5]||(s[5]=[M("S")])),_:2},1032,["onClick"]),e(n,{type:"success",size:"small",onClick:S=>u(o).jumpTo(u(L)(w.startTime))},{default:l(()=>s[6]||(s[6]=[M("J")])),_:2},1032,["onClick"]),e(n,{type:"success",size:"small",onClick:S=>w.startTime=w.startTime-.5},{default:l(()=>[e(k,null,{default:l(()=>[e(E)]),_:1})]),_:2},1032,["onClick"]),e(n,{type:"success",size:"small",onClick:S=>w.startTime=w.startTime+.5},{default:l(()=>[e(k,null,{default:l(()=>[e(b)]),_:1})]),_:2},1032,["onClick"]),e(c,{"model-value":u(L)(w.startTime),size:"small",readonly:""},null,8,["model-value"]),e(n,{size:"small",onClick:S=>K(y),disabled:y===0||a.length===1},{default:l(()=>s[7]||(s[7]=[M("↑")])),_:2},1032,["onClick","disabled"]),e(n,{size:"small",onClick:S=>x(y),disabled:a.length===1},{default:l(()=>[e(k,null,{default:l(()=>[e(U)]),_:1})]),_:2},1032,["onClick","disabled"])]),z("div",st,[e(n,{type:"danger",size:"small",onClick:S=>R(y)},{default:l(()=>s[8]||(s[8]=[M("E")])),_:2},1032,["onClick"]),e(n,{type:"danger",size:"small",onClick:S=>u(o).jumpTo(u(L)(w.endTime))},{default:l(()=>s[9]||(s[9]=[M("J")])),_:2},1032,["onClick"]),e(n,{type:"danger",size:"small",onClick:S=>w.endTime=w.endTime-.5},{default:l(()=>[e(k,null,{default:l(()=>[e(E)]),_:1})]),_:2},1032,["onClick"]),e(n,{type:"danger",size:"small",onClick:S=>w.endTime=w.endTime+.5},{default:l(()=>[e(k,null,{default:l(()=>[e(b)]),_:1})]),_:2},1032,["onClick"]),e(c,{type:"danger","model-value":u(L)(w.endTime),size:"small",readonly:""},null,8,["model-value"]),e(n,{size:"small",onClick:S=>V(y),disabled:y===a.length-1||a.length===1},{default:l(()=>s[10]||(s[10]=[M("↓")])),_:2},1032,["onClick","disabled"]),e(n,{size:"small",onClick:S=>I(y)},{default:l(()=>[e(k,null,{default:l(()=>[e(F)]),_:1})]),_:2},1032,["onClick"])])]))),128))])]),_:1},512)),[[Ee,u(p).open]])}}}),at=ge(ot,[["__scopeId","data-v-6b32c328"]]),rt={__name:"App",setup(m){return W(),(o,p)=>{const v=T("el-col"),a=T("el-row"),f=T("el-container");return N(),B(ue,null,[e(at),e(f,{style:{height:"100vh"}},{default:l(()=>[e(a,{class:"grid-container"},{default:l(()=>[e(v,{class:"grid-section top"},{default:l(()=>[e(Ne)]),_:1}),e(v,{class:"grid-section bottom"},{default:l(()=>[e(Fe),e(Ze)]),_:1})]),_:1})]),_:1})],64)}}},it=ge(rt,[["__scopeId","data-v-66edf2f0"]]),le=De(it);le.use(Ie());le.use(he);for(const[m,o]of Object.entries(Te))le.component(m,o);le.mount("#app");
