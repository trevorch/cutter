import{E as ne,i as we}from"./element-plus-CRGBzuq5.js";import{f as G,g as X,B as be,l as Te,w as Ce,Q as Se}from"./@element-plus-By79ymwD.js";import{r as h,j as ie,c as q,o as R,a as x,M as B,u,d as ce,k as ye,ag as C,aq as ze,I as ge,G as ue,H as l,P as t,L as P,S as xe,w as Me,J as fe,O as de,a6 as $e,D as Pe,n as Ee,X as De,Q as Ie,at as je}from"./@vue-C01xNfPK.js";import{d as me,c as Le}from"./pinia-CKuVeK4o.js";import{P as Oe}from"./plyr-CZIZ1zVJ.js";import{H as re}from"./hls.js-DWnTp5j0.js";import{f as ve}from"./flv.js-HEV2ctDJ.js";import"./lodash-es-S0Y0Up6J.js";import"./@vueuse-ZGnAJoZm.js";import"./@popperjs-D_chPuIy.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-NaOncrXL.js";import"./async-validator-9PlIezaS.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@floating-ui-DwceP2Gb.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))v(o);new MutationObserver(o=>{for(const f of o)if(f.type==="childList")for(const L of f.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&v(L)}).observe(document,{childList:!0,subtree:!0});function m(o){const f={};return o.integrity&&(f.integrity=o.integrity),o.referrerPolicy&&(f.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?f.credentials="include":o.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function v(o){if(o.ep)return;o.ep=!0;const f=m(o);fetch(o.href,f)}})();function Ve(d,s="未知错误"){if(d instanceof Error)return d.message;if(typeof d=="string")return d;if(typeof d=="object"&&d!==null&&"message"in d&&typeof d.message=="string")return d.message;try{return JSON.stringify(d)}catch{return s}}const le={showClose:!0,dangerouslyUseHTMLString:!0,duration:3e3},se=`style="
      width: 500px; 
      word-wrap: break-word;
      word-break: break-all;
      white-space: normal;
      overflow-wrap: anywhere;
    "`;function Y(d,s){const m=Ve(d),v=s?`${s}: ${m}`:m;ne.error({...le,message:`
    <div ${se}>
      ${v}
    </div>
    `})}function I(d){ne.error({...le,message:`
    <div ${se}>
      ${d}
    </div>
    `})}function He(d){ne.info({...le,message:`
    <div ${se}>
      ${d}
    </div>
    `})}function J(d){ne.success({...le,message:`
    <div ${se}>
      ${d}
    </div>
    `})}const W=d=>{try{const[s,m]=d.split("."),[v,o,f]=s.split(":").map(Number),L=m?parseInt(m.padEnd(3,"0")):0;return v*3600+o*60+f+L/1e3}catch{return 0}},O=d=>{const s=Math.round(d%1*1e3),m=Math.floor(d),v=Math.floor(m/3600),o=Math.floor(m%3600/60),f=m%60;return`${String(v).padStart(2,"0")}:${String(o).padStart(2,"0")}:${String(f).padStart(2,"0")}.${String(s).padStart(3,"0")}`},Z=me("player",()=>{const d=h(""),s=h(null),m=h(null),v=h(null),o=h(null),f=h(null),L=r=>{s.value=new Oe(r,{hideControls:!1,controls:["play-large","current-time","progress","duration","mute","volume","fullscreen","settings"],blankVideo:"https://cdn.plyr.io/static/blank.mp4"})},M=r=>{o.value=r,d.value=r.date;const p=r.urls[0],y={type:"video",sources:[{src:p,type:N(p)}]};H(y).then(()=>{var S;return(S=s.value)==null?void 0:S.play()})},N=r=>r.includes(".m3u8")?"application/x-mpegURL":r.includes(".flv")?"video/x-flv":"video/mp4",H=async r=>{var y,S,E;(y=m.value)==null||y.destroy(),m.value=null,(S=v.value)==null||S.destroy(),v.value=null;const p=r.sources[0].src.includes(".m3u8")?"hls":r.sources[0].src.includes(".flv")?"flv":"html5";try{p!==f.value&&await((E=s.value)==null?void 0:E.stop()),s.value.source=r,p==="hls"&&re.isSupported()?await K(r.sources[0].src):p==="flv"&&ve.isSupported()&&await U(r.sources[0].src),f.value=p}catch(j){console.error("源切换失败:",j)}},K=async r=>new Promise(p=>{m.value=new re,m.value.loadSource(r),m.value.attachMedia(s.value.media),m.value.on(re.Events.MANIFEST_PARSED,p)}),U=async r=>{v.value=ve.createPlayer({type:"flv",url:r}),v.value.attachMediaElement(s.value.media),v.value.load(),await v.value.play()},V=h(!1);return{player:s,initPlayer:L,switchSource:H,playStream:M,title:d,data:o,autoPlay:V,jumpTo:r=>{const p=W(r);if(s.value&&p>0)try{s.value.currentTime=p,V.value?s.value.play():s.value.pause()}catch(y){Y(y,"跳转播放失败，请检查播放器状态")}}}}),Ke={class:"video-wrapper"},Ne={class:"title"},Re={class:"plyr-container"},Ue={__name:"Player",setup(d){const s=Z(),m=h(null);return ie(()=>{s.initPlayer(m.value)}),(v,o)=>(R(),q("div",Ke,[x("h3",Ne,B(u(s).title),1),x("div",Re,[x("video",{class:"player",ref_key:"videoRef",ref:m,playsinline:""},null,512)])]))}},pe=me("editor",()=>{const d=h(!1),s=h(!1),m=h(""),v=h(null),o=5e3,f=h(o),L=r=>{s.value=!0,v.value=r,m.value=r.date,_()},M=h([]),N=r=>{try{const[p,y]=r.split("."),[S,E,j]=p.split(":").map(Number);return S*3600+E*60+j}catch(p){console.error(p)}},H=h(new Map),K=()=>{H.value.clear(),M.value.forEach((r,p)=>{try{const y=N(r.time);H.value.has(y)||H.value.set(y,p)}catch(y){console.error(`错误处理时间戳 ${r.time}（索引 ${p}）: ${y}`)}})},U=r=>{if(!M.value)return;const p=f.value+r;f.value=Math.max(p,0);const y=r/1e3;M.value=M.value.map(S=>{const j=W(S.time)+y;return{...S,time:O(Math.max(j,0))}}),K()},V=()=>{if(!M.value)return;const p=(f.value-o)/1e3;M.value=M.value.map(y=>{const E=W(y.time)-p;return{...y,time:O(Math.max(E,0))}}),f.value=o,K()},_=async()=>{var r;d.value=!0;try{const p=await fetch(`srts/${(r=v.value)==null?void 0:r.id}`);if(!p.ok)throw new Error(`HTTP error! status: ${p.status}`);M.value=await p.json();const y=f.value/1e3;M.value=M.value.map(S=>{const j=W(S.time)+y;return{...S,time:O(Math.max(j,0))}}),K()}catch(p){console.error("数据获取失败:",p),Y(p,"字幕数据加载失败，请稍后重试"),M.value=[]}finally{d.value=!1}};return{open:s,title:m,edit:L,data:v,timelineData:M,loading:d,shiftCount:f,shiftSubtitles:U,timeToSeconds:W,secondsToTime:O,resetSubtitles:V,timeMap:H,timeToKey:N}}),Ae=["onClick"],Fe=["onClick"],Be={style:{display:"flex",gap:"0","justify-content":"flex-end"}},qe=ce({__name:"Playlist",setup(d){const s=Z(),m=pe(),v=h(""),o=h(!0),f=h([]),L=async()=>{try{const _=await fetch("video.json");if(!_.ok)throw new Error(`HTTP error! status: ${_.status}`);f.value=await _.json()}catch(_){Y(_,"数据加载失败")}finally{o.value=!1}},M=ye(()=>{const _=v.value.toLowerCase();return f.value.filter(r=>r.id.toLowerCase().includes(_)||r.date.toLowerCase().includes(_))}),N=async _=>{var r;((r=_.urls)==null?void 0:r.length)>0?await K(_.urls[0],"链接已复制到剪贴板","链接复制失败"):I("该记录没有可用的链接")},H=async _=>{_.id?await K(_.id,"ID已复制到剪贴板","ID复制失败"):I("该记录没有可用的ID")},K=async(_,r,p)=>{try{await navigator.clipboard.writeText(_),J(r)}catch(y){Y(y,p)}},U=_=>{var r;(r=_.urls)!=null&&r.length&&(_.urls[0],s.playStream(_),m.edit(_))},V=_=>{var r;(r=_.urls)!=null&&r.length&&(_.urls[0],s.playStream(_))};return ie(()=>{L()}),(_,r)=>{const p=C("el-table-column"),y=C("el-input"),S=C("el-button"),E=C("el-table"),j=ze("loading");return ge((R(),ue(E,{data:M.value,"default-sort":{prop:"date",order:"descending"},height:"100%",style:{width:"100%"}},{default:l(()=>[t(p,{fixed:"",label:"日期",prop:"date",sortable:"",width:"140"},{default:l(c=>[x("span",{class:"clickable-text",onClick:a=>N(c.row)},B(c.row.date),9,Ae)]),_:1}),t(p,{fixed:"",label:"标识",prop:"id",width:"180"},{default:l(c=>[x("span",{class:"clickable-text",onClick:a=>H(c.row)},B(c.row.id),9,Fe)]),_:1}),t(p,{fixed:"right",align:"right",width:"115"},{header:l(()=>[t(y,{modelValue:v.value,"onUpdate:modelValue":r[0]||(r[0]=c=>v.value=c),size:"small",placeholder:"输入关键词搜索"},null,8,["modelValue"])]),default:l(c=>{var a,i;return[x("div",Be,[t(S,{plain:"",size:"small",onClick:e=>U(c.row),type:c.row.hasSrt?"success":"warning",disabled:!c.row.hasSrt},{default:l(()=>r[1]||(r[1]=[P(" 编辑 ")])),_:2},1032,["onClick","type","disabled"]),t(S,{plain:"",size:"small",onClick:e=>V(c.row),type:(a=c.row.urls)!=null&&a.length?"success":"warning",disabled:!((i=c.row.urls)!=null&&i.length)},{default:l(()=>r[2]||(r[2]=[P(" 播放 ")])),_:2},1032,["onClick","type","disabled"])])]}),_:1})]),_:1},8,["data"])),[[j,o.value]])}}}),he=me("picker",()=>{const d=h(!1),s=h(!1),m=h("");return h(null),h(0),{open:s,title:m,loading:d}}),Je={style:{display:"flex",gap:"0","justify-content":"flex-start"}},Ye={key:0,class:"loading-state"},Qe={class:"time-label"},Ge=["onClick"],Xe={key:1,class:"empty-state"},We={class:"footer-container"},Ze={class:"time-shift-controls"},et={class:"time-shift-controls"},ee=50,te=5e3,tt=ce({__name:"Editor",setup(d){const s=pe(),m=Z(),v=he(),o=h(1e3),f=c=>{const a=o.value+c;o.value=Math.max(ee,Math.min(te,a))},L=h(["你好","晚上好","拜拜","再见"]),M=c=>L.value.some(a=>c.includes(a)),N=ye(()=>s.timelineData.map((c,a)=>({text:c.text,index:a})).filter(({text:c})=>M(c)).map(({index:c})=>c).sort((c,a)=>c-a)),H=()=>{const c=N.value;if(c.length===0){I("未找到包含关键字的字幕行");return}let a=0,i=c.length-1,e=-1;for(;a<=i;){const n=Math.floor((a+i)/2);c[n]<r.value?(e=c[n],a=n+1):i=n-1}e===-1&&(e=c[c.length-1]),y(e)},K=()=>{const c=N.value;if(c.length===0){I("未找到包含关键字的字幕行");return}let a=0,i=c.length-1,e=-1;for(;a<=i;){const n=Math.floor((a+i)/2);c[n]>r.value?(e=c[n],i=n-1):a=n+1}e===-1&&(e=c[0]),y(e)},U=h(),V=h([]),_=c=>{c instanceof HTMLElement&&V.value.push(c)},r=h(0),p=async()=>{if(!m.player)return;const c=m.player.currentTime,a=O(c),i=s.timeToKey(a),e=s.timeMap.get(i);typeof e=="number"&&e!==r.value&&(r.value=e,await Ee(),setTimeout(()=>y(e),50))},y=c=>{const a=U.value,i=V.value[c];if(i instanceof HTMLElement&&a){const n=i.offsetTop-a.clientHeight/2;a.scrollTo({top:n,behavior:"smooth"})}},S=h(595),E=h();let j=null;return ie(()=>{E.value=document.querySelector(".grid-section.bottom"),E.value&&(j=new ResizeObserver(c=>{for(const a of c){const{height:i}=a.contentRect;S.value=i}}),j.observe(E.value)),m.player.on("timeupdate",p)}),xe(()=>{j&&E.value&&j.unobserve(E.value),m.player.off("timeupdate",p),V.value=[]}),Me(()=>s.timelineData,()=>{V.value=[]}),(c,a)=>{const i=C("Expand"),e=C("el-icon"),n=C("el-button"),w=C("Top"),k=C("Bottom"),D=C("el-text"),T=C("Minus"),A=C("el-drawer");return R(),ue(A,{modelValue:u(s).open,"onUpdate:modelValue":a[12]||(a[12]=g=>u(s).open=g),direction:"btt",modal:!1,size:S.value,onOpened:a[13]||(a[13]=g=>u(s).shiftSubtitles(0))},{header:l(()=>[x("div",Je,[t(n,{size:"small",type:u(v).open?"success":"",circle:""},{default:l(()=>[t(e,{onClick:a[0]||(a[0]=g=>u(v).open=!u(v).open)},{default:l(()=>[t(i)]),_:1})]),_:1},8,["type"]),t(n,{onClick:a[1]||(a[1]=g=>u(m).autoPlay=!u(m).autoPlay),type:u(m).autoPlay?"success":"",size:"small",circle:""},{default:l(()=>a[14]||(a[14]=[P("A")])),_:1},8,["type"]),t(n,{size:"small",circle:""},{default:l(()=>[t(e,{onClick:H},{default:l(()=>[t(w)]),_:1})]),_:1}),t(n,{size:"small",circle:""},{default:l(()=>[t(e,{onClick:K},{default:l(()=>[t(k)]),_:1})]),_:1}),t(D,{class:"mx-1",type:"warning"},{default:l(()=>{var g;return[P(B((g=u(s).data)==null?void 0:g.id),1)]}),_:1})])]),default:l(()=>[x("div",{class:"timeline-container",ref_key:"containerRef",ref:U},[u(s).loading?(R(),q("div",Ye,[t(e,{class:"is-loading",color:"#409EFF",size:20},{default:l(()=>[t(u(Te))]),_:1}),a[15]||(a[15]=x("span",null,"正在加载字幕数据...",-1))])):fe("",!0),(R(!0),q(de,null,$e(u(s).timelineData,(g,F)=>(R(),q("div",{key:F,class:"timeline-item",ref_for:!0,ref:_},[x("span",Qe,B(g.time),1),x("span",{class:Pe(["content-text",{highlight:F==r.value,keyword:M(g.text)}]),onClick:b=>u(m).jumpTo(g.time)},B(g.text),11,Ge)]))),128)),!u(s).loading&&u(s).timelineData.length===0?(R(),q("div",Xe,[t(e,null,{default:l(()=>[t(u(Ce))]),_:1}),a[16]||(a[16]=x("span",null,"暂无字幕数据",-1))])):fe("",!0)],512)]),footer:l(()=>[x("div",We,[x("div",Ze,[t(n,{onClick:a[2]||(a[2]=g=>f(-1e3)),disabled:o.value<=ee,size:"small"},{default:l(()=>[t(e,null,{default:l(()=>[t(u(G))]),_:1}),t(e,null,{default:l(()=>[t(u(G))]),_:1}),t(e,null,{default:l(()=>[t(u(G))]),_:1})]),_:1},8,["disabled"]),t(n,{onClick:a[3]||(a[3]=g=>f(-500)),disabled:o.value<=ee,size:"small"},{default:l(()=>[t(e,null,{default:l(()=>[t(u(G))]),_:1}),t(e,null,{default:l(()=>[t(u(G))]),_:1})]),_:1},8,["disabled"]),t(n,{onClick:a[4]||(a[4]=g=>f(-50)),disabled:o.value<=ee,size:"small"},{default:l(()=>[t(e,null,{default:l(()=>[t(u(G))]),_:1})]),_:1},8,["disabled"]),x("span",{class:"count",onClick:a[5]||(a[5]=g=>o.value=50)},B(o.value),1),t(n,{onClick:a[6]||(a[6]=g=>f(50)),disabled:o.value>=te,size:"small"},{default:l(()=>[t(e,null,{default:l(()=>[t(u(X))]),_:1})]),_:1},8,["disabled"]),t(n,{onClick:a[7]||(a[7]=g=>f(500)),disabled:o.value>=te,size:"small"},{default:l(()=>[t(e,null,{default:l(()=>[t(u(X))]),_:1}),t(e,null,{default:l(()=>[t(u(X))]),_:1})]),_:1},8,["disabled"]),t(n,{onClick:a[8]||(a[8]=g=>f(1e3)),disabled:o.value>=te,size:"small"},{default:l(()=>[t(e,null,{default:l(()=>[t(u(X))]),_:1}),t(e,null,{default:l(()=>[t(u(X))]),_:1}),t(e,null,{default:l(()=>[t(u(X))]),_:1})]),_:1},8,["disabled"])]),x("div",et,[t(n,{onClick:a[9]||(a[9]=g=>u(s).shiftSubtitles(-o.value)),disabled:u(s).shiftCount===0},{default:l(()=>[t(e,null,{default:l(()=>[t(T)]),_:1})]),_:1},8,["disabled"]),x("span",{class:"count",onClick:a[10]||(a[10]=(...g)=>u(s).resetSubtitles&&u(s).resetSubtitles(...g))},B(u(s).shiftCount),1),t(n,{onClick:a[11]||(a[11]=g=>u(s).shiftSubtitles(o.value))},{default:l(()=>[t(e,null,{default:l(()=>[t(u(be))]),_:1})]),_:1})])])]),_:1},8,["modelValue","size"])}}}),nt={class:"segment-container"},lt={class:"time-controls"},st={class:"time-controls"},ot={class:"time-controls"},at={class:"card-footer"},rt=ce({__name:"Picker",setup(d){const s=Z(),m=he(),v=pe(),o=De([f()]);function f(){return{id:crypto.randomUUID(),startTime:0,endTime:0,duration:0,isK:!1}}const L=i=>{o.splice(i+1,0,f())},M=i=>{o.length>1&&o.splice(i,1)},N=i=>{if(i>0){const e=o.splice(i,1)[0];o.splice(i-1,0,e)}},H=i=>{if(i<o.length-1){const e=o.splice(i,1)[0];o.splice(i+1,0,e)}};function K(i){if(!s.player)return;const e=s.player.currentTime,n=o[i];n.startTime=e}function U(i){if(!s.player)return;const e=s.player.currentTime,n=o[i];n.endTime=e}function V(i,e){var Q;const n=o[i],w=n.isK?"-k":"";let k=(Q=s.data)==null?void 0:Q.urls[0];if(!k)throw I("请先播放视频"),new Error("请先播放视频");const D=k.match(/\/([^\/]+)\.mp4$/),T=D?D[1]:(()=>{const ae=new Date;return`${ae.getFullYear()}${(ae.getMonth()+1).toString().padStart(2,"0")}${ae.getDate().toString().padStart(2,"0")}`})();if(!n.startTime||!n.endTime)throw I("请先设置开始和结束时间"),new Error("请先设置开始和结束时间");const A=O(n.startTime),g=O(n.endTime),F=A.replace(/:/g,"."),b=g.replace(/:/g,".");let $="yt-dlp --no-check-certificate";$=`${$} --download-sections "*${A}-${g}"`,$=`${$} --force-keyframes-at-cuts`;const z="~/storage/downloads/Reqable/";return e=="video"&&($=`${$} --merge-output-format mp4 -o "${z}${T}_${F}-${b}.mp4"`),e=="audio"&&($=`${$} ${w} -x --audio-format mp3 --postprocessor-args "ffmpeg:-c:a libmp3lame -b:a 32k -minrate 32k -maxrate 32k -bufsize 64k -ac 1 -ar 22050" -o "${z}${T}_${F}-${b}.mp3"`),$=`${$} '${k}' `,$}function _(i,e){var z;const n=o[i],w=n.isK?"-k":"";let k=(z=s.data)==null?void 0:z.urls[0];if(!k)throw I("请先播放视频"),new Error("请先播放视频");const D=k.match(/\/([^\/]+)\.mp4$/),T=D?D[1]:(()=>{const Q=new Date;return`${Q.getFullYear()}${(Q.getMonth()+1).toString().padStart(2,"0")}${Q.getDate().toString().padStart(2,"0")}`})();if(!n.startTime||!n.endTime)throw I("请先设置开始和结束时间"),new Error("请先设置开始和结束时间");const A=O(n.startTime),g=O(n.endTime),F=A.replace(/:/g,"."),b=g.replace(/:/g,".");let $=`--download-sections "*${A}-${g}"`;return e=="video"&&($=`${$} --merge-output-format mp4 -o "${T}_${F}-${b}.mp4"`),e=="audio"&&($=`${$} ${w} -x --audio-format mp3 --postprocessor-args "ffmpeg:-c:a libmp3lame -b:a 32k -minrate 32k -maxrate 32k -bufsize 64k -ac 1 -ar 22050" -o "${T}_${F}-${b}.mp3"`),$}async function r(){var e;const i=(e=s.data)==null?void 0:e.urls[0];if(!i){I("请先播放视频");return}try{await navigator.clipboard.writeText(i),J(`链接已复制：${i}`)}catch(n){console.error(n),I("复制失败，请手动复制")}}async function p(){var e;const i=(e=s.data)==null?void 0:e.id;if(!i){I("请先播放视频");return}try{await navigator.clipboard.writeText(i),J(`ID已复制：${i}`)}catch(n){console.error(n),I("ID失败，请手动复制")}}async function y(i,e,n){let w="";switch(e){case"dlp":w=V(i,n);break;case"seal":w=_(i,n);break}try{await navigator.clipboard.writeText(w),J(`命令已复制：${w}`)}catch(k){console.error(k),I("复制失败，请手动复制")}}const S=async i=>{const e=[];o.forEach((n,w)=>{console.log(`Index: ${w}`,n),e.push(V(w,i))});try{await navigator.clipboard.writeText(e.join(`
`)),J(`命令已复制：${e.join("<br/>")}`)}catch(n){console.error(n),I("复制失败，请手动复制")}},E=h(!1);async function j(){var D;let i=(D=s.data)==null?void 0:D.urls[0];if(!i){I("请先播放视频");return}const e=i.match(/\/([^\/]+)\.mp4$/),n=e?e[1]:(()=>{const T=new Date;return`${T.getFullYear()}${(T.getMonth()+1).toString().padStart(2,"0")}${T.getDate().toString().padStart(2,"0")}`})(),w=o.filter(T=>T.startTime<T.endTime).map((T,A)=>`${O(T.startTime)}-${O(T.endTime)}`);if(!w.length){I("请先至少设置一个开始和结束时间");return}const k=`dlp ${E.value?"keep":"delete"} '${i}' ${n} ${w.join(" ")}`;try{c(k),await navigator.clipboard.writeText(k),J(`命令已复制：${k}`)}catch(T){console.error(T),Y(T,"复制失败，请手动复制")}}async function c(i){try{const e=await fetch("http://localhost:8080/run",{method:"POST",headers:{"Content-Type":"text/plain"},body:i});if(!e.ok)throw new Error(`HTTP 错误: ${e.status}`);const w=(await e.json()).task_id;a(w)}catch(e){Y(e,"请求失败: ")}}function a(i){const e=setInterval(async()=>{var n;try{const w=await fetch(`http://localhost:8080/progress/${i}`);if(!w.ok)throw new Error(`进度查询失败: ${w.status}`);const k=await w.json(),D=(n=k.recent_log)!=null&&n.length?`

最近日志:
`+k.recent_log.join(`
`):"";He(D),k.status==="completed"&&(clearInterval(e),J(`处理完成✅ (状态: ${k.status})${D}`)),k.status==="failed"&&(clearInterval(e),I(`处理完成✅ (状态: ${k.status})${D}`))}catch(w){clearInterval(e),Y(w,"监控失败: ")}},1e3)}return(i,e)=>{const n=C("el-button"),w=C("el-input"),k=C("el-icon"),D=C("CaretLeft"),T=C("CaretRight"),A=C("Minus"),g=C("Plus"),F=C("el-card");return ge((R(),ue(F,{class:"segment-control-card"},{footer:l(()=>[x("div",at,[t(n,{size:"small",onClick:r},{default:l(()=>e[11]||(e[11]=[P("复制链接")])),_:1}),t(n,{size:"small",onClick:p},{default:l(()=>e[12]||(e[12]=[P("复制ID")])),_:1}),t(n,{size:"small",onClick:j},{default:l(()=>e[13]||(e[13]=[P("下载片段")])),_:1}),t(n,{size:"small",onClick:e[0]||(e[0]=b=>S("video"))},{default:l(()=>e[14]||(e[14]=[P("复制命令")])),_:1})])]),default:l(()=>[x("div",nt,[(R(!0),q(de,null,$e(o,(b,$)=>(R(),q("div",{key:b.id,class:"segment-item"},[x("div",lt,[t(n,{type:"primary",size:"small",onClick:z=>y($,"seal","audio")},{default:l(()=>e[1]||(e[1]=[P("SA")])),_:2},1032,["onClick"]),t(n,{type:"primary",size:"small",onClick:z=>y($,"seal","video")},{default:l(()=>e[2]||(e[2]=[P("SV")])),_:2},1032,["onClick"]),t(n,{type:"primary",size:"small",onClick:z=>y($,"dlp","audio")},{default:l(()=>e[3]||(e[3]=[P("DA")])),_:2},1032,["onClick"]),t(n,{type:"primary",size:"small",onClick:z=>y($,"dlp","video")},{default:l(()=>e[4]||(e[4]=[P("DV")])),_:2},1032,["onClick"]),t(w,{"model-value":u(v).secondsToTime(b.endTime-b.startTime),size:"small",readonly:""},null,8,["model-value"]),t(n,{size:"small",type:b.isK?"success":"info",onClick:z=>b.isK=!b.isK},{default:l(()=>[P(B(b.isK?"-k开":"-k关"),1)]),_:2},1032,["type","onClick"]),t(n,{size:"small",circle:"",type:"success"},{default:l(()=>[t(k,null,{default:l(()=>[P(B($+1),1)]),_:2},1024)]),_:2},1024)]),x("div",st,[t(n,{type:"success",size:"small",onClick:z=>K($)},{default:l(()=>e[5]||(e[5]=[P("S")])),_:2},1032,["onClick"]),t(n,{type:"success",size:"small",onClick:z=>u(s).jumpTo(u(O)(b.startTime))},{default:l(()=>e[6]||(e[6]=[P("J")])),_:2},1032,["onClick"]),t(n,{type:"success",size:"small",onClick:z=>b.startTime=b.startTime-.5},{default:l(()=>[t(k,null,{default:l(()=>[t(D)]),_:1})]),_:2},1032,["onClick"]),t(n,{type:"success",size:"small",onClick:z=>b.startTime=b.startTime+.5},{default:l(()=>[t(k,null,{default:l(()=>[t(T)]),_:1})]),_:2},1032,["onClick"]),t(w,{"model-value":u(O)(b.startTime),size:"small",readonly:""},null,8,["model-value"]),t(n,{size:"small",onClick:z=>N($),disabled:$===0||o.length===1},{default:l(()=>e[7]||(e[7]=[P("↑")])),_:2},1032,["onClick","disabled"]),t(n,{size:"small",onClick:z=>M($),disabled:o.length===1},{default:l(()=>[t(k,null,{default:l(()=>[t(A)]),_:1})]),_:2},1032,["onClick","disabled"])]),x("div",ot,[t(n,{type:"danger",size:"small",onClick:z=>U($)},{default:l(()=>e[8]||(e[8]=[P("E")])),_:2},1032,["onClick"]),t(n,{type:"danger",size:"small",onClick:z=>u(s).jumpTo(u(O)(b.endTime))},{default:l(()=>e[9]||(e[9]=[P("J")])),_:2},1032,["onClick"]),t(n,{type:"danger",size:"small",onClick:z=>b.endTime=b.endTime-.5},{default:l(()=>[t(k,null,{default:l(()=>[t(D)]),_:1})]),_:2},1032,["onClick"]),t(n,{type:"danger",size:"small",onClick:z=>b.endTime=b.endTime+.5},{default:l(()=>[t(k,null,{default:l(()=>[t(T)]),_:1})]),_:2},1032,["onClick"]),t(w,{type:"danger","model-value":u(O)(b.endTime),size:"small",readonly:""},null,8,["model-value"]),t(n,{size:"small",onClick:z=>H($),disabled:$===o.length-1||o.length===1},{default:l(()=>e[10]||(e[10]=[P("↓")])),_:2},1032,["onClick","disabled"]),t(n,{size:"small",onClick:z=>L($)},{default:l(()=>[t(k,null,{default:l(()=>[t(g)]),_:1})]),_:2},1032,["onClick"])])]))),128))])]),_:1},512)),[[Ie,u(m).open]])}}}),ke=(d,s)=>{const m=d.__vccOpts||d;for(const[v,o]of s)m[v]=o;return m},_e=ke(rt,[["__scopeId","data-v-cc931b1d"]]),it={__name:"App",setup(d){return Z(),(s,m)=>{const v=C("el-col"),o=C("el-row"),f=C("el-container");return R(),q(de,null,[t(_e),t(f,{style:{height:"100vh"}},{default:l(()=>[t(o,{class:"grid-container"},{default:l(()=>[t(v,{class:"grid-section top"},{default:l(()=>[t(Ue)]),_:1}),t(v,{class:"grid-section bottom"},{default:l(()=>[t(qe),t(tt),t(_e)]),_:1})]),_:1})]),_:1})],64)}}},ct=ke(it,[["__scopeId","data-v-d44e3bc6"]]),oe=je(ct);oe.use(Le());oe.use(we);for(const[d,s]of Object.entries(Se))oe.component(d,s);oe.mount("#app");
