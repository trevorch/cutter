import{E as ee,i as $e}from"./element-plus-CRGBzuq5.js";import{f as J,g as Y,B as he,l as ke,w as we,Q as be}from"./@element-plus-By79ymwD.js";import{r as $,j as ae,c as F,o as O,a as C,M as R,u as m,d as ie,k as fe,ag as T,aq as Te,I as ve,G as re,H as n,P as t,L as S,S as Ce,w as Se,J as me,O as ce,a6 as _e,D as ze,n as Me,X as Pe,Q as xe,at as Ee}from"./@vue-C01xNfPK.js";import{d as ue,c as De}from"./pinia-CKuVeK4o.js";import{P as Ie}from"./plyr-CZIZ1zVJ.js";import{H as oe}from"./hls.js-DWnTp5j0.js";import{f as pe}from"./flv.js-HEV2ctDJ.js";import"./lodash-es-S0Y0Up6J.js";import"./@vueuse-ZGnAJoZm.js";import"./@popperjs-D_chPuIy.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-NaOncrXL.js";import"./async-validator-9PlIezaS.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@floating-ui-DwceP2Gb.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))v(s);new MutationObserver(s=>{for(const _ of s)if(_.type==="childList")for(const k of _.addedNodes)k.tagName==="LINK"&&k.rel==="modulepreload"&&v(k)}).observe(document,{childList:!0,subtree:!0});function f(s){const _={};return s.integrity&&(_.integrity=s.integrity),s.referrerPolicy&&(_.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?_.credentials="include":s.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function v(s){if(s.ep)return;s.ep=!0;const _=f(s);fetch(s.href,_)}})();function je(p,i="未知错误"){if(p instanceof Error)return p.message;if(typeof p=="string")return p;if(typeof p=="object"&&p!==null&&"message"in p&&typeof p.message=="string")return p.message;try{return JSON.stringify(p)}catch{return i}}const te={showClose:!0,dangerouslyUseHTMLString:!0,duration:3e3},le=`style="
      width: 500px; 
      word-wrap: break-word;
      word-break: break-all;
      white-space: normal;
      overflow-wrap: anywhere;
    "`;function B(p,i){const f=je(p),v=i?`${i}: ${f}`:f;ee.error({...te,message:`
    <div ${le}>
      ${v}
    </div>
    `})}function I(p){ee.error({...te,message:`
    <div ${le}>
      ${p}
    </div>
    `})}function Le(p){ee.info({...te,message:`
    <div ${le}>
      ${p}
    </div>
    `})}function Q(p){ee.success({...te,message:`
    <div ${le}>
      ${p}
    </div>
    `})}const G=p=>{try{const[i,f]=p.split("."),[v,s,_]=i.split(":").map(Number),k=f?parseInt(f.padEnd(3,"0")):0;return v*3600+s*60+_+k/1e3}catch{return 0}},x=p=>{const i=Math.round(p%1*1e3),f=Math.floor(p),v=Math.floor(f/3600),s=Math.floor(f%3600/60),_=f%60;return`${String(v).padStart(2,"0")}:${String(s).padStart(2,"0")}:${String(_).padStart(2,"0")}.${String(i).padStart(3,"0")}`},X=ue("player",()=>{const p=$(""),i=$(null),f=$(null),v=$(null),s=$(null),_=$(null),k=o=>{i.value=new Ie(o,{hideControls:!1,controls:["play-large","current-time","progress","duration","mute","volume","fullscreen","settings"],blankVideo:"https://cdn.plyr.io/static/blank.mp4"})},L=o=>{s.value=o,p.value=o.date;const y=o.urls[0],h={type:"video",sources:[{src:y,type:D(y)}]};j(h).then(()=>{var M;return(M=i.value)==null?void 0:M.play()})},D=o=>o.includes(".m3u8")?"application/x-mpegURL":o.includes(".flv")?"video/x-flv":"video/mp4",j=async o=>{var h,M,z;(h=f.value)==null||h.destroy(),f.value=null,(M=v.value)==null||M.destroy(),v.value=null;const y=o.sources[0].src.includes(".m3u8")?"hls":o.sources[0].src.includes(".flv")?"flv":"html5";try{y!==_.value&&await((z=i.value)==null?void 0:z.stop()),i.value.source=o,y==="hls"&&oe.isSupported()?await V(o.sources[0].src):y==="flv"&&pe.isSupported()&&await H(o.sources[0].src),_.value=y}catch(K){console.error("源切换失败:",K)}},V=async o=>new Promise(y=>{f.value=new oe,f.value.loadSource(o),f.value.attachMedia(i.value.media),f.value.on(oe.Events.MANIFEST_PARSED,y)}),H=async o=>{v.value=pe.createPlayer({type:"flv",url:o}),v.value.attachMediaElement(i.value.media),v.value.load(),await v.value.play()},E=$(!1);return{player:i,initPlayer:k,switchSource:j,playStream:L,title:p,data:s,autoPlay:E,jumpTo:o=>{const y=G(o);if(i.value&&y>0)try{i.value.currentTime=y,E.value?i.value.play():i.value.pause()}catch(h){B(h,"跳转播放失败，请检查播放器状态")}}}}),Oe={class:"video-wrapper"},Ve={class:"title"},He={class:"plyr-container"},Ke={__name:"Player",setup(p){const i=X(),f=$(null);return ae(()=>{i.initPlayer(f.value)}),(v,s)=>(O(),F("div",Oe,[C("h3",Ve,R(m(i).title),1),C("div",He,[C("video",{class:"player",ref_key:"videoRef",ref:f,playsinline:""},null,512)])]))}},de=ue("editor",()=>{const p=$(!1),i=$(!1),f=$(""),v=$(null),s=$(0),_=d=>{i.value=!0,v.value=d,f.value=d.date,E()},k=$([]),L=d=>{try{const[o,y]=d.split("."),[h,M,z]=o.split(":").map(Number);return h*3600+M*60+z}catch(o){console.error(o)}},D=$(new Map),j=()=>{D.value.clear(),k.value.forEach((d,o)=>{try{const y=L(d.time);D.value.has(y)||D.value.set(y,o)}catch(y){console.error(`错误处理时间戳 ${d.time}（索引 ${o}）: ${y}`)}})},V=d=>{if(!k.value)return;const o=s.value+d;s.value=Math.max(o,0);const y=d/1e3;k.value=k.value.map(h=>{const z=G(h.time)+y;return{...h,time:x(Math.max(z,0))}}),j()},H=()=>{if(k.value){if(s.value){const d=s.value/1e3;k.value=k.value.map(o=>{const h=G(o.time)-d;return{...o,time:x(Math.max(h,0))}})}s.value=0,j()}},E=async()=>{var d;p.value=!0;try{const o=await fetch(`srts/${(d=v.value)==null?void 0:d.id}`);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);if(k.value=await o.json(),s.value){const y=s.value/1e3;k.value=k.value.map(h=>{const z=G(h.time)+y;return{...h,time:x(Math.max(z,0))}})}j()}catch(o){console.error("数据获取失败:",o),B(o,"字幕数据加载失败，请稍后重试"),k.value=[]}finally{p.value=!1}};return{open:i,title:f,edit:_,data:v,timelineData:k,loading:p,shiftCount:s,shiftSubtitles:V,timeToSeconds:G,secondsToTime:x,resetSubtitles:H,timeMap:D,timeToKey:L}}),ye=(p,i)=>{const f=p.__vccOpts||p;for(const[v,s]of i)f[v]=s;return f},Ne=["onClick"],Re=["onClick"],Ue={style:{display:"flex",gap:"0","justify-content":"flex-end"}},Ae=ie({__name:"Playlist",setup(p){const i=X(),f=de(),v=$(""),s=$(!0),_=$([]),k=async()=>{try{const d=await fetch("video.json");if(!d.ok)throw new Error(`HTTP error! status: ${d.status}`);_.value=await d.json()}catch(d){B(d,"数据加载失败")}finally{s.value=!1}},L=fe(()=>{const d=v.value.toLowerCase();return _.value.filter(o=>o.id.toLowerCase().includes(d)||o.date.toLowerCase().includes(d))}),D=async d=>{var o;((o=d.urls)==null?void 0:o.length)>0?await V(d.urls[0],"链接已复制到剪贴板","链接复制失败"):I("该记录没有可用的链接")},j=async d=>{d.id?await V(d.id,"ID已复制到剪贴板","ID复制失败"):I("该记录没有可用的ID")},V=async(d,o,y)=>{try{await navigator.clipboard.writeText(d),Q(o)}catch(h){B(h,y)}},H=d=>{var o;(o=d.urls)!=null&&o.length&&(d.urls[0],i.playStream(d),f.edit(d))},E=d=>{var o;(o=d.urls)!=null&&o.length&&(d.urls[0],i.playStream(d))};return ae(()=>{k()}),(d,o)=>{const y=T("el-table-column"),h=T("el-input"),M=T("el-button"),z=T("el-table"),K=Te("loading");return ve((O(),re(z,{data:L.value,"default-sort":{prop:"date",order:"descending"},height:"100%",style:{width:"100%"}},{default:n(()=>[t(y,{fixed:"",label:"日期",prop:"date",sortable:"",width:"140"},{default:n(l=>[C("span",{class:"clickable-text",onClick:e=>D(l.row)},R(l.row.date),9,Ne)]),_:1}),t(y,{fixed:"",label:"标识",prop:"id",width:"180"},{default:n(l=>[C("span",{class:"clickable-text",onClick:e=>j(l.row)},R(l.row.id),9,Re)]),_:1}),t(y,{fixed:"right",align:"right",width:"115"},{header:n(()=>[t(h,{modelValue:v.value,"onUpdate:modelValue":o[0]||(o[0]=l=>v.value=l),size:"small",placeholder:"输入关键词搜索"},null,8,["modelValue"])]),default:n(l=>{var e,a;return[C("div",Ue,[t(M,{size:"small",onClick:r=>H(l.row),disabled:!((e=l.row.urls)!=null&&e.length)},{default:n(()=>o[1]||(o[1]=[S(" 编辑 ")])),_:2},1032,["onClick","disabled"]),t(M,{size:"small",onClick:r=>E(l.row),disabled:!((a=l.row.urls)!=null&&a.length)},{default:n(()=>o[2]||(o[2]=[S(" 播放 ")])),_:2},1032,["onClick","disabled"])])]}),_:1})]),_:1},8,["data"])),[[K,s.value]])}}}),ge=ue("picker",()=>{const p=$(!1),i=$(!1),f=$("");return $(null),$(0),{open:i,title:f,loading:p}}),Fe={style:{display:"flex",gap:"0","justify-content":"flex-start"}},Be={key:0,class:"loading-state"},qe={class:"time-label"},Je=["onClick"],Ye={key:1,class:"empty-state"},Qe={class:"footer-container"},Ge={class:"time-shift-controls"},Xe={class:"time-shift-controls"},W=50,Z=5e3,We=ie({__name:"Editor",setup(p){const i=de(),f=X(),v=ge(),s=$(1e3),_=l=>{const e=s.value+l;s.value=Math.max(W,Math.min(Z,e))},k=$(["你好","晚上好","拜拜","再见"]),L=l=>k.value.some(e=>l.includes(e)),D=fe(()=>i.timelineData.map((l,e)=>({text:l.text,index:e})).filter(({text:l})=>L(l)).map(({index:l})=>l).sort((l,e)=>l-e)),j=()=>{const l=D.value;if(l.length===0){I("未找到包含关键字的字幕行");return}let e=0,a=l.length-1,r=-1;for(;e<=a;){const c=Math.floor((e+a)/2);l[c]<o.value?(r=l[c],e=c+1):a=c-1}r===-1&&(r=l[l.length-1]),h(r)},V=()=>{const l=D.value;if(l.length===0){I("未找到包含关键字的字幕行");return}let e=0,a=l.length-1,r=-1;for(;e<=a;){const c=Math.floor((e+a)/2);l[c]>o.value?(r=l[c],a=c-1):e=c+1}r===-1&&(r=l[0]),h(r)},H=$(),E=$([]),d=l=>{l instanceof HTMLElement&&E.value.push(l)},o=$(0),y=async()=>{if(!f.player)return;const l=f.player.currentTime,e=x(l),a=i.timeToKey(e),r=i.timeMap.get(a);typeof r=="number"&&r!==o.value&&(o.value=r,await Me(),setTimeout(()=>h(r),50))},h=l=>{const e=H.value,a=E.value[l];if(a instanceof HTMLElement&&e){const c=a.offsetTop-e.clientHeight/2;e.scrollTo({top:c,behavior:"smooth"})}},M=$(595),z=$();let K=null;return ae(()=>{z.value=document.querySelector(".grid-section.bottom"),z.value&&(K=new ResizeObserver(l=>{for(const e of l){const{height:a}=e.contentRect;M.value=a}}),K.observe(z.value)),f.player.on("timeupdate",y)}),Ce(()=>{K&&z.value&&K.unobserve(z.value),f.player.off("timeupdate",y),E.value=[]}),Se(()=>i.timelineData,()=>{E.value=[]}),(l,e)=>{const a=T("Expand"),r=T("el-icon"),c=T("el-button"),P=T("Top"),w=T("Bottom"),N=T("el-text"),U=T("Minus"),A=T("el-drawer");return O(),re(A,{modelValue:m(i).open,"onUpdate:modelValue":e[12]||(e[12]=u=>m(i).open=u),direction:"btt",modal:!1,size:M.value,onOpened:e[13]||(e[13]=u=>m(i).shiftSubtitles(0))},{header:n(()=>[C("div",Fe,[t(c,{size:"small",type:m(v).open?"success":"",circle:""},{default:n(()=>[t(r,{onClick:e[0]||(e[0]=u=>m(v).open=!m(v).open)},{default:n(()=>[t(a)]),_:1})]),_:1},8,["type"]),t(c,{onClick:e[1]||(e[1]=u=>m(f).autoPlay=!m(f).autoPlay),type:m(f).autoPlay?"success":"",size:"small",circle:""},{default:n(()=>e[14]||(e[14]=[S("A")])),_:1},8,["type"]),t(c,{size:"small",circle:""},{default:n(()=>[t(r,{onClick:j},{default:n(()=>[t(P)]),_:1})]),_:1}),t(c,{size:"small",circle:""},{default:n(()=>[t(r,{onClick:V},{default:n(()=>[t(w)]),_:1})]),_:1}),t(N,{class:"mx-1",type:"warning"},{default:n(()=>{var u;return[S(R((u=m(i).data)==null?void 0:u.id),1)]}),_:1})])]),default:n(()=>[C("div",{class:"timeline-container",ref_key:"containerRef",ref:H},[m(i).loading?(O(),F("div",Be,[t(r,{class:"is-loading",color:"#409EFF",size:20},{default:n(()=>[t(m(ke))]),_:1}),e[15]||(e[15]=C("span",null,"正在加载字幕数据...",-1))])):me("",!0),(O(!0),F(ce,null,_e(m(i).timelineData,(u,g)=>(O(),F("div",{key:g,class:"timeline-item",ref_for:!0,ref:d},[C("span",qe,R(u.time),1),C("span",{class:ze(["content-text",{highlight:g==o.value,keyword:L(u.text)}]),onClick:b=>m(f).jumpTo(u.time)},R(u.text),11,Je)]))),128)),!m(i).loading&&m(i).timelineData.length===0?(O(),F("div",Ye,[t(r,null,{default:n(()=>[t(m(we))]),_:1}),e[16]||(e[16]=C("span",null,"暂无字幕数据",-1))])):me("",!0)],512)]),footer:n(()=>[C("div",Qe,[C("div",Ge,[t(c,{onClick:e[2]||(e[2]=u=>_(-1e3)),disabled:s.value<=W,size:"small"},{default:n(()=>[t(r,null,{default:n(()=>[t(m(J))]),_:1}),t(r,null,{default:n(()=>[t(m(J))]),_:1}),t(r,null,{default:n(()=>[t(m(J))]),_:1})]),_:1},8,["disabled"]),t(c,{onClick:e[3]||(e[3]=u=>_(-500)),disabled:s.value<=W,size:"small"},{default:n(()=>[t(r,null,{default:n(()=>[t(m(J))]),_:1}),t(r,null,{default:n(()=>[t(m(J))]),_:1})]),_:1},8,["disabled"]),t(c,{onClick:e[4]||(e[4]=u=>_(-50)),disabled:s.value<=W,size:"small"},{default:n(()=>[t(r,null,{default:n(()=>[t(m(J))]),_:1})]),_:1},8,["disabled"]),C("span",{class:"count",onClick:e[5]||(e[5]=u=>s.value=50)},R(s.value),1),t(c,{onClick:e[6]||(e[6]=u=>_(50)),disabled:s.value>=Z,size:"small"},{default:n(()=>[t(r,null,{default:n(()=>[t(m(Y))]),_:1})]),_:1},8,["disabled"]),t(c,{onClick:e[7]||(e[7]=u=>_(500)),disabled:s.value>=Z,size:"small"},{default:n(()=>[t(r,null,{default:n(()=>[t(m(Y))]),_:1}),t(r,null,{default:n(()=>[t(m(Y))]),_:1})]),_:1},8,["disabled"]),t(c,{onClick:e[8]||(e[8]=u=>_(1e3)),disabled:s.value>=Z,size:"small"},{default:n(()=>[t(r,null,{default:n(()=>[t(m(Y))]),_:1}),t(r,null,{default:n(()=>[t(m(Y))]),_:1}),t(r,null,{default:n(()=>[t(m(Y))]),_:1})]),_:1},8,["disabled"])]),C("div",Xe,[t(c,{onClick:e[9]||(e[9]=u=>m(i).shiftSubtitles(-s.value)),disabled:m(i).shiftCount===0},{default:n(()=>[t(r,null,{default:n(()=>[t(U)]),_:1})]),_:1},8,["disabled"]),C("span",{class:"count",onClick:e[10]||(e[10]=(...u)=>m(i).resetSubtitles&&m(i).resetSubtitles(...u))},R(m(i).shiftCount),1),t(c,{onClick:e[11]||(e[11]=u=>m(i).shiftSubtitles(s.value))},{default:n(()=>[t(r,null,{default:n(()=>[t(m(he))]),_:1})]),_:1})])])]),_:1},8,["modelValue","size"])}}}),Ze={class:"segment-container"},et={class:"time-controls"},tt={class:"time-controls"},lt={class:"time-controls"},nt={class:"card-footer"},st=ie({__name:"Picker",setup(p){const i=X(),f=ge(),v=de(),s=Pe([_()]);function _(){return{id:crypto.randomUUID(),startTime:0,endTime:0,duration:0,isK:!1}}const k=l=>{s.splice(l+1,0,_())},L=l=>{s.length>1&&s.splice(l,1)},D=l=>{if(l>0){const e=s.splice(l,1)[0];s.splice(l-1,0,e)}},j=l=>{if(l<s.length-1){const e=s.splice(l,1)[0];s.splice(l+1,0,e)}};function V(l){if(!i.player)return;const e=i.player.currentTime,a=s[l];a.startTime=e}function H(l){if(!i.player)return;const e=i.player.currentTime,a=s[l];a.endTime=e}function E(l,e){var q;const a=s[l],r=a.isK?"-k":"";let c=(q=i.data)==null?void 0:q.urls[0];if(!c)throw I("请先播放视频"),new Error("请先播放视频");const P=c.match(/\/([^\/]+)\.mp4$/),w=P?P[1]:(()=>{const se=new Date;return`${se.getFullYear()}${(se.getMonth()+1).toString().padStart(2,"0")}${se.getDate().toString().padStart(2,"0")}`})();if(!a.startTime||!a.endTime)throw I("请先设置开始和结束时间"),new Error("请先设置开始和结束时间");const N=x(a.startTime),U=x(a.endTime),A=N.replace(/:/g,"."),u=U.replace(/:/g,".");let g="yt-dlp --no-check-certificate";g=`${g} --download-sections "*${N}-${U}"`,g=`${g} --force-keyframes-at-cuts`;const b="~/storage/downloads/Reqable/";return e=="video"&&(g=`${g} --merge-output-format mp4 -o "${b}${w}_${A}-${u}.mp4"`),e=="audio"&&(g=`${g} ${r} -x --audio-format mp3 --postprocessor-args "ffmpeg:-c:a libmp3lame -b:a 32k -minrate 32k -maxrate 32k -bufsize 64k -ac 1 -ar 22050" -o "${b}${w}_${A}-${u}.mp3"`),g=`${g} '${c}' `,g}function d(l,e){var b;const a=s[l],r=a.isK?"-k":"";let c=(b=i.data)==null?void 0:b.urls[0];if(!c)throw I("请先播放视频"),new Error("请先播放视频");const P=c.match(/\/([^\/]+)\.mp4$/),w=P?P[1]:(()=>{const q=new Date;return`${q.getFullYear()}${(q.getMonth()+1).toString().padStart(2,"0")}${q.getDate().toString().padStart(2,"0")}`})();if(!a.startTime||!a.endTime)throw I("请先设置开始和结束时间"),new Error("请先设置开始和结束时间");const N=x(a.startTime),U=x(a.endTime),A=N.replace(/:/g,"."),u=U.replace(/:/g,".");let g=`--download-sections "*${N}-${U}"`;return e=="video"&&(g=`${g} --merge-output-format mp4 -o "${w}_${A}-${u}.mp4"`),e=="audio"&&(g=`${g} ${r} -x --audio-format mp3 --postprocessor-args "ffmpeg:-c:a libmp3lame -b:a 32k -minrate 32k -maxrate 32k -bufsize 64k -ac 1 -ar 22050" -o "${w}_${A}-${u}.mp3"`),g}async function o(l,e,a){let r="";switch(e){case"dlp":r=E(l,a);break;case"seal":r=d(l,a);break}try{await navigator.clipboard.writeText(r),Q(`命令已复制：${r}`)}catch(c){console.error(c),I("复制失败，请手动复制")}}const y=async l=>{const e=[];s.forEach((a,r)=>{console.log(`Index: ${r}`,a),e.push(E(r,l))});try{await navigator.clipboard.writeText(e.join(`
`)),Q(`命令已复制：${e.join("<br/>")}`)}catch(a){console.error(a),I("复制失败，请手动复制")}},h=$(!1);async function M(){var P;let l=(P=i.data)==null?void 0:P.urls[0];if(!l){I("请先播放视频");return}const e=l.match(/\/([^\/]+)\.mp4$/),a=e?e[1]:(()=>{const w=new Date;return`${w.getFullYear()}${(w.getMonth()+1).toString().padStart(2,"0")}${w.getDate().toString().padStart(2,"0")}`})(),r=s.filter(w=>w.startTime<w.endTime).map((w,N)=>`${x(w.startTime)}-${x(w.endTime)}`);if(!r.length){I("请先至少设置一个开始和结束时间");return}const c=`dlp ${h.value?"keep":"delete"} '${l}' ${a} ${r.join(" ")}`;try{z(c),await navigator.clipboard.writeText(c),Q(`命令已复制：${c}`)}catch(w){console.error(w),B(w,"复制失败，请手动复制")}}async function z(l){try{const e=await fetch("http://localhost:8080/run",{method:"POST",headers:{"Content-Type":"text/plain"},body:l});if(!e.ok)throw new Error(`HTTP 错误: ${e.status}`);const r=(await e.json()).task_id;K(r)}catch(e){B(e,"请求失败: ")}}function K(l){const e=setInterval(async()=>{var a;try{const r=await fetch(`http://localhost:8080/progress/${l}`);if(!r.ok)throw new Error(`进度查询失败: ${r.status}`);const c=await r.json(),P=(a=c.recent_log)!=null&&a.length?`

最近日志:
`+c.recent_log.join(`
`):"";Le(P),c.status==="completed"&&(clearInterval(e),Q(`处理完成✅ (状态: ${c.status})${P}`)),c.status==="failed"&&(clearInterval(e),I(`处理完成✅ (状态: ${c.status})${P}`))}catch(r){clearInterval(e),B(r,"监控失败: ")}},1e3)}return(l,e)=>{const a=T("el-button"),r=T("el-input"),c=T("el-icon"),P=T("CaretLeft"),w=T("CaretRight"),N=T("Minus"),U=T("Plus"),A=T("el-card");return ve((O(),re(A,{class:"segment-control-card"},{footer:n(()=>[C("div",nt,[t(a,{size:"small",type:h.value?"success":"",onClick:e[0]||(e[0]=u=>h.value=!h.value)},{default:n(()=>e[12]||(e[12]=[S(" 保留缓存 ")])),_:1},8,["type"]),t(a,{size:"small",onClick:M},{default:n(()=>e[13]||(e[13]=[S("下载片段")])),_:1}),t(a,{size:"small",onClick:e[1]||(e[1]=u=>y("video"))},{default:n(()=>e[14]||(e[14]=[S("复制命令")])),_:1})])]),default:n(()=>[C("div",Ze,[(O(!0),F(ce,null,_e(s,(u,g)=>(O(),F("div",{key:u.id,class:"segment-item"},[C("div",et,[t(a,{type:"primary",size:"small",onClick:b=>o(g,"seal","audio")},{default:n(()=>e[2]||(e[2]=[S("SA")])),_:2},1032,["onClick"]),t(a,{type:"primary",size:"small",onClick:b=>o(g,"seal","video")},{default:n(()=>e[3]||(e[3]=[S("SV")])),_:2},1032,["onClick"]),t(a,{type:"primary",size:"small",onClick:b=>o(g,"dlp","audio")},{default:n(()=>e[4]||(e[4]=[S("DA")])),_:2},1032,["onClick"]),t(a,{type:"primary",size:"small",onClick:b=>o(g,"dlp","video")},{default:n(()=>e[5]||(e[5]=[S("DV")])),_:2},1032,["onClick"]),t(r,{"model-value":m(v).secondsToTime(u.endTime-u.startTime),size:"small",readonly:""},null,8,["model-value"]),t(a,{size:"small",type:u.isK?"success":"info",onClick:b=>u.isK=!u.isK},{default:n(()=>[S(R(u.isK?"-k开":"-k关"),1)]),_:2},1032,["type","onClick"]),t(a,{size:"small",circle:"",type:"success"},{default:n(()=>[t(c,null,{default:n(()=>[S(R(g+1),1)]),_:2},1024)]),_:2},1024)]),C("div",tt,[t(a,{type:"success",size:"small",onClick:b=>V(g)},{default:n(()=>e[6]||(e[6]=[S("S")])),_:2},1032,["onClick"]),t(a,{type:"success",size:"small",onClick:b=>m(i).jumpTo(m(x)(u.startTime))},{default:n(()=>e[7]||(e[7]=[S("J")])),_:2},1032,["onClick"]),t(a,{type:"success",size:"small",onClick:b=>u.startTime=u.startTime-.5},{default:n(()=>[t(c,null,{default:n(()=>[t(P)]),_:1})]),_:2},1032,["onClick"]),t(a,{type:"success",size:"small",onClick:b=>u.startTime=u.startTime+.5},{default:n(()=>[t(c,null,{default:n(()=>[t(w)]),_:1})]),_:2},1032,["onClick"]),t(r,{"model-value":m(x)(u.startTime),size:"small",readonly:""},null,8,["model-value"]),t(a,{size:"small",onClick:b=>D(g),disabled:g===0||s.length===1},{default:n(()=>e[8]||(e[8]=[S("↑")])),_:2},1032,["onClick","disabled"]),t(a,{size:"small",onClick:b=>L(g),disabled:s.length===1},{default:n(()=>[t(c,null,{default:n(()=>[t(N)]),_:1})]),_:2},1032,["onClick","disabled"])]),C("div",lt,[t(a,{type:"danger",size:"small",onClick:b=>H(g)},{default:n(()=>e[9]||(e[9]=[S("E")])),_:2},1032,["onClick"]),t(a,{type:"danger",size:"small",onClick:b=>m(i).jumpTo(m(x)(u.endTime))},{default:n(()=>e[10]||(e[10]=[S("J")])),_:2},1032,["onClick"]),t(a,{type:"danger",size:"small",onClick:b=>u.endTime=u.endTime-.5},{default:n(()=>[t(c,null,{default:n(()=>[t(P)]),_:1})]),_:2},1032,["onClick"]),t(a,{type:"danger",size:"small",onClick:b=>u.endTime=u.endTime+.5},{default:n(()=>[t(c,null,{default:n(()=>[t(w)]),_:1})]),_:2},1032,["onClick"]),t(r,{type:"danger","model-value":m(x)(u.endTime),size:"small",readonly:""},null,8,["model-value"]),t(a,{size:"small",onClick:b=>j(g),disabled:g===s.length-1||s.length===1},{default:n(()=>e[11]||(e[11]=[S("↓")])),_:2},1032,["onClick","disabled"]),t(a,{size:"small",onClick:b=>k(g)},{default:n(()=>[t(c,null,{default:n(()=>[t(U)]),_:1})]),_:2},1032,["onClick"])])]))),128))])]),_:1},512)),[[xe,m(f).open]])}}}),ot=ye(st,[["__scopeId","data-v-1964e5de"]]),at={__name:"App",setup(p){return X(),(i,f)=>{const v=T("el-col"),s=T("el-row"),_=T("el-container");return O(),F(ce,null,[t(ot),t(_,{style:{height:"100vh"}},{default:n(()=>[t(s,{class:"grid-container"},{default:n(()=>[t(v,{class:"grid-section top"},{default:n(()=>[t(Ke)]),_:1}),t(v,{class:"grid-section bottom"},{default:n(()=>[t(Ae),t(We)]),_:1})]),_:1})]),_:1})],64)}}},it=ye(at,[["__scopeId","data-v-66edf2f0"]]),ne=Ee(it);ne.use(De());ne.use($e);for(const[p,i]of Object.entries(be))ne.component(p,i);ne.mount("#app");
